#!/usr/bin/env php
<?php
require 'vendor/autoload.php';

use PhpParser\Error;
use PhpParser\ParserFactory;
use PhpParser\PrettyPrinter;

$code = file_get_contents($argv[1]);

$parser        = (new ParserFactory)->create(ParserFactory::PREFER_PHP7);
$prettyPrinter = new PrettyPrinter\Standard;

try {
    // parse
    $stmts = $parser->parse($code);
	// var_dump($stmts);  // useful sometimes

	// pretty print
	$code = "<?php\n" . $prettyPrinter->prettyPrint($stmts) . "\n";

	echo $code;

} catch (Error $e) {
    echo 'Parse Error: ', $e->getMessage();
}
